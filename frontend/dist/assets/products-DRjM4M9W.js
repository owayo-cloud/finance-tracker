import{aQ as Rt,aR as zt,aS as Ft,aT as Dt,D as a,aU as De,a0 as f,j as e,a1 as C,ab as we,_ as ce,aV as he,$ as xe,a3 as Ae,a2 as Ne,a4 as qe,aW as At,aX as Nt,a7 as Oe,aY as je,a9 as fe,aa as be,aZ as qt,a_ as Ot,aG as Te,a$ as Et,b0 as Lt,b1 as Bt,b2 as Vt,b3 as Ee,b4 as $t,b5 as Mt,X as ye,E as le,u as Le,b as Se,h as G,c as ve,b6 as Be,Z as K,aJ as B,b7 as Wt,T as j,e as v,f as z,H as A,r as Gt,b8 as Ht,o as T,l as me,aM as Ve,b9 as $e,q as re,ba as Me,M as Ut,N as Kt,O as Qt,Q as Yt,R as Jt,U as Xt,V as Zt,bb as er,bc as We,bd as Ge,be as He,bf as H,W as tr,bg as rr,C as sr,a as or,bh as nr,S as Ce,G as _e,aL as ir,bi as Y,bj as ee}from"./index-CxzheAlx.js";import{D as Ue,a as Ke,b as Qe,d as Ye,i as Je,f as Xe,g as Ze,j as et,c as tt}from"./dialog-CkfW9bA3.js";import{G as ar}from"./grid-CH0aUrGp.js";import{V as U}from"./v-stack-Clf1x48u.js";import{B as lr,T as rt,a as st,b as ge,c as I,d as ot,e as _,S as te,P as cr,f as dr,g as ur,h as pr}from"./pagination-oGRgrJ6W.js";import{B as E}from"./badge-DapnaDzq.js";import{S as mr}from"./separator-DILM_yuv.js";import{H as gr}from"./index-D7ZSCJA-.js";const pe=t=>new Rt(t);var hr=t=>{if(!t)return;const r=zt(t),n=Ft(t),i=Dt(t),s=()=>{requestAnimationFrame(()=>{t.style.height="auto";let y;r.boxSizing==="content-box"?y=t.scrollHeight-(parseFloat(r.paddingTop)+parseFloat(r.paddingBottom)):y=t.scrollHeight+parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth),r.maxHeight!=="none"&&y>parseFloat(r.maxHeight)?(r.overflowY==="hidden"&&(t.style.overflowY="scroll"),y=parseFloat(r.maxHeight)):r.overflowY!=="hidden"&&(t.style.overflowY="hidden"),t.style.height=`${y}px`})};t.addEventListener("input",s),t.form?.addEventListener("reset",s);const l=Object.getPrototypeOf(t),u=Object.getOwnPropertyDescriptor(l,"value");Object.defineProperty(t,"value",{...u,set(){u?.set?.apply(this,arguments),s()}});const h=new n.ResizeObserver(()=>{requestAnimationFrame(()=>s())});h.observe(t);const p=new n.MutationObserver(()=>s());return p.observe(t,{attributes:!0,attributeFilter:["rows","placeholder"]}),i.fonts?.addEventListener("loadingdone",s),()=>{t.removeEventListener("input",s),t.form?.removeEventListener("reset",s),i.fonts?.removeEventListener("loadingdone",s),h.disconnect(),p.disconnect()}};const nt=a.forwardRef((t,r)=>{const{autoresize:n,...i}=t,s=a.useRef(null),l=De(),u=f(l?.getTextareaProps(),{style:{resize:n?"none":void 0}},i);return a.useEffect(()=>{if(n)return hr(s.current)},[n]),e.jsx(C.textarea,{...u,ref:we(r,s)})});nt.displayName="FieldTextarea";const[it,N]=ce({name:"SelectContext",hookName:"useSelectContext",providerName:"<SelectProvider />"}),at=a.forwardRef((t,r)=>{const n=N(),i=f(n.getClearTriggerProps(),t);return e.jsx(C.button,{...i,ref:r})});at.displayName="SelectClearTrigger";const lt=a.forwardRef((t,r)=>{const n=N(),i=he(),s=f(n.getContentProps(),i.getPresenceProps(),t);return i.unmounted?null:e.jsx(C.div,{...s,ref:we(i.ref,r)})});lt.displayName="SelectContent";const ct=a.forwardRef((t,r)=>{const n=N(),i=f(n.getControlProps(),t);return e.jsx(C.div,{...i,ref:r})});ct.displayName="SelectControl";const dt=a.forwardRef((t,r)=>{const n=N(),i=f(n.getIndicatorProps(),t);return e.jsx(C.div,{...i,ref:r})});dt.displayName="SelectIndicator";const[xr,us]=ce({name:"SelectItemContext",hookName:"useSelectItemContext",providerName:"<SelectItemProvider />"}),[jr,ut]=ce({name:"SelectItemPropsContext",hookName:"useSelectItemPropsContext",providerName:"<SelectItemPropsProvider />"}),pt=a.forwardRef((t,r)=>{const[n,i]=xe()(t,["item","persistFocus"]),s=N(),l=f(s.getItemProps(n),i),u=s.getItemState(n);return e.jsx(jr,{value:n,children:e.jsx(xr,{value:u,children:e.jsx(C.div,{...l,ref:r})})})});pt.displayName="SelectItem";const[fr,br]=ce({name:"SelectItemGroupPropsContext",hookName:"useSelectItemGroupPropsContext",providerName:"<SelectItemGroupPropsProvider />"}),mt=a.forwardRef((t,r)=>{const n=a.useId(),[i,s]=xe()(t,["id"]),l={id:n,...i},u=N(),h=f(u.getItemGroupProps(l),s);return e.jsx(fr,{value:l,children:e.jsx(C.div,{...h,ref:r})})});mt.displayName="SelectItemGroup";const gt=a.forwardRef((t,r)=>{const n=N(),i=br(),s=f(n.getItemGroupLabelProps({htmlFor:i.id}),t);return e.jsx(C.div,{...s,ref:r})});gt.displayName="SelectItemGroupLabel";const ht=a.forwardRef((t,r)=>{const n=N(),i=ut(),s=f(n.getItemIndicatorProps(i),t);return e.jsx(C.div,{...s,ref:r})});ht.displayName="SelectItemIndicator";const xt=a.forwardRef((t,r)=>{const n=N(),i=ut(),s=f(n.getItemTextProps(i),t);return e.jsx(C.span,{...s,ref:r})});xt.displayName="SelectItemText";const jt=a.forwardRef((t,r)=>{const n=N(),i=f(n.getLabelProps(),t);return e.jsx(C.label,{...i,ref:r})});jt.displayName="SelectLabel";const ft=a.forwardRef((t,r)=>{const n=N(),i=f(n.getPositionerProps(),t);return he().unmounted?null:e.jsx(C.div,{...i,ref:r})});ft.displayName="SelectPositioner";const yr=t=>{const r=a.useId(),{dir:n}=Ae(),{getRootNode:i}=Ne(),s=De(),l={id:r,ids:{label:s?.ids.label,hiddenSelect:s?.ids.control},disabled:s?.disabled,readOnly:s?.readOnly,invalid:s?.invalid,required:s?.required,dir:n,getRootNode:i,...t},u=qe(At,l);return Nt(u,Oe)},Sr=(t,r)=>{const[n,i]=je(t),[s,l]=xe()(i,["closeOnSelect","collection","composite","defaultHighlightedValue","defaultOpen","defaultValue","deselectable","disabled","form","highlightedValue","id","ids","invalid","loopFocus","multiple","name","onFocusOutside","onHighlightChange","onInteractOutside","onOpenChange","onPointerDownOutside","onSelect","onValueChange","open","positioning","readOnly","required","scrollToIndexFn","value"]),u=yr(s),h=fe(f({present:u.open},n)),p=f(u.getRootProps(),l);return e.jsx(it,{value:u,children:e.jsx(be,{value:h,children:e.jsx(C.div,{...p,ref:r})})})},vr=a.forwardRef(Sr),Pr=(t,r)=>{const[n,i]=je(t),[{value:s},l]=xe()(i,["value"]),u=fe(f({present:s.open},n)),h=f(s.getRootProps(),l);return e.jsx(it,{value:s,children:e.jsx(be,{value:u,children:e.jsx(C.div,{...h,ref:r})})})},Cr=a.forwardRef(Pr),bt=a.forwardRef((t,r)=>{const n=N(),i=f(n.getTriggerProps(),t);return e.jsx(C.button,{...i,ref:r})});bt.displayName="SelectTrigger";const yt=a.forwardRef((t,r)=>{const{children:n,placeholder:i,...s}=t,l=N(),u=f(l.getValueTextProps(),s);return e.jsx(C.span,{...u,ref:r,children:n||l.valueAsString||i})});yt.displayName="SelectValueText";const[St,de]=ce({name:"TooltipContext",hookName:"useTooltipContext",providerName:"<TooltipProvider />"}),vt=a.forwardRef((t,r)=>{const n=de(),i=f(n.getArrowProps(),t);return e.jsx(C.div,{...i,ref:r})});vt.displayName="TooltipArrow";const Pt=a.forwardRef((t,r)=>{const n=de(),i=f(n.getArrowTipProps(),t);return e.jsx(C.div,{...i,ref:r})});Pt.displayName="TooltipArrowTip";const Ct=a.forwardRef((t,r)=>{const n=de(),i=he(),s=f(n.getContentProps(),i.getPresenceProps(),t);return i.unmounted?null:e.jsx(C.div,{...s,ref:we(i.ref,r)})});Ct.displayName="TooltipContent";const wt=a.forwardRef((t,r)=>{const n=de(),i=f(n.getPositionerProps(),t);return he().unmounted?null:e.jsx(C.div,{...i,ref:r})});wt.displayName="TooltipPositioner";const wr=t=>{const r=a.useId(),{getRootNode:n}=Ne(),{dir:i}=Ae(),s={id:r,dir:i,getRootNode:n,...t},l=qe(qt,s);return Ot(l,Oe)},Tr=t=>{const[r,{children:n,...i}]=je(t),s=wr(i),l=fe(f({present:s.open},r));return e.jsx(St,{value:s,children:e.jsx(be,{value:l,children:n})})},kr=t=>{const[r,{value:n,children:i}]=je(t),s=fe(f({present:n.open},r));return e.jsx(St,{value:n,children:e.jsx(be,{value:s,children:i})})},Tt=a.forwardRef((t,r)=>{const n=de(),i=f(n.getTriggerProps(),t);return e.jsx(C.button,{...i,ref:r})});Tt.displayName="TooltipTrigger";const{withProvider:_r,withContext:Pe}=Te({key:"emptyState"}),Ir=_r("div","root"),Rr=Pe("div","content"),zr=Pe("div","indicator"),Fr=Pe("h3","title"),Dr=Pe("p","description"),{withProvider:kt,withContext:F}=Te({key:"select"});kt(Cr,"root",{forwardAsChild:!0});const Ie=kt(vr,"root",{forwardAsChild:!0,defaultProps:{positioning:{sameWidth:!0}}}),Re=F(bt,"trigger",{forwardAsChild:!0});F(ft,"positioner",{forwardAsChild:!0});const ze=F(lt,"content",{forwardAsChild:!0}),Fe=F(yt,"valueText",{forwardAsChild:!0});F(at,"clearTrigger",{forwardAsChild:!0,defaultProps:{children:e.jsx(Et,{boxSize:"1em"})}});F(mt,"itemGroup",{forwardAsChild:!0});F(gt,"itemGroupLabel",{forwardAsChild:!0});const ie=F(pt,"item",{forwardAsChild:!0});F(xt,"itemText",{forwardAsChild:!0});F(ht,"itemIndicator",{forwardAsChild:!0,defaultProps:{children:e.jsx(Lt,{})}});F("div","indicatorGroup");F(dt,"indicator",{forwardAsChild:!0,defaultProps:{children:e.jsx(Bt,{})}});F(ct,"control",{forwardAsChild:!0});F(jt,"label",{forwardAsChild:!0});const Ar=a.forwardRef(function(r,n){const{columns:i,minChildWidth:s,...l}=r,u=Vt(),h=s?qr(s,u):Or(i);return e.jsx(ar,{ref:n,templateColumns:h,...l})});function Nr(t){return typeof t=="number"?`${t}px`:t}function qr(t,r){return Ee(t,n=>{const i=r.tokens.getVar(`sizes.${n}`,Nr(n));return n===null?null:`repeat(auto-fit, minmax(${i}, 1fr))`})}function Or(t){return Ee(t,r=>r===null?null:`repeat(${r}, minmax(0, 1fr))`)}const{withContext:Er}=$t({key:"textarea"}),Lr=Er(nt),{withRootProvider:_t,withContext:ue}=Te({key:"tooltip"});_t(kr);const Br=_t(Tr,{defaultProps:{lazyMount:!0,unmountOnExit:!0}}),Vr=ue(Tt,"trigger",{forwardAsChild:!0}),$r=ue(wt,"positioner",{forwardAsChild:!0}),Mr=ue(Ct,"content",{forwardAsChild:!0}),It=ue(Pt,"arrowTip",{forwardAsChild:!0}),Wr=ue(vt,"arrow",{forwardAsChild:!0,defaultProps:{children:e.jsx(It,{})}}),Gr=a.forwardRef(function(r,n){const{showArrow:i,children:s,disabled:l,portalled:u,content:h,contentProps:p,portalRef:y,...x}=r;return l?s:e.jsxs(Br,{...x,children:[e.jsx(Vr,{asChild:!0,children:s}),e.jsx(Mt,{disabled:!u,container:y,children:e.jsx($r,{children:e.jsxs(Mr,{ref:n,...p,children:[i&&e.jsx(Wr,{children:e.jsx(It,{})}),h]})})})]})}),Hr=()=>{const[t,r]=a.useState(!1),[n,i]=a.useState(null),[s,l]=a.useState(null),[u,h]=a.useState(!1),[p,y]=a.useState(""),[x,R]=a.useState(""),c=a.useRef(null),k=ye(),{showSuccessToast:V}=ve(),se=d=>{const w=d.replace(/[^\d.]/g,"").split(".");return w[0]=w[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),w.length>1?`${w[0]}.${w[1].slice(0,2)}`:w[0]},q=d=>{const m=d.replace(/,/g,"");return parseFloat(m)||0},{data:$,isLoading:M}=le({queryKey:["categories"],queryFn:()=>K.readCategories()}),{data:J,isLoading:oe}=le({queryKey:["statuses"],queryFn:()=>K.readStatuses()}),{register:b,handleSubmit:L,reset:X,setValue:Q,formState:{errors:P,isValid:ne,isSubmitting:Z}}=Le({mode:"onBlur",criteriaMode:"all",defaultValues:{name:"",description:"",buying_price:0,selling_price:0,current_stock:1,reorder_level:0,category_id:"",status_id:"",image_id:void 0}});a.useEffect(()=>{b("category_id",{required:"Category is required"}),b("status_id",{required:"Status is required"}),b("buying_price",{required:"Buying price is required.",validate:d=>(typeof d=="string"?parseFloat(d):d)<=0?"Buying price must be greater than 0":!0}),b("selling_price",{required:"Selling price is required.",validate:(d,m)=>{const w=typeof d=="string"?parseFloat(d):d,ke=typeof m.buying_price=="string"?parseFloat(m.buying_price):m.buying_price;return w<=0?"Selling price must be greater than 0":w<=ke?"Selling price must be greater than buying price":!0}})},[b]);const W=a.useMemo(()=>$?.data?pe({items:$.data.map(d=>({label:d.name,value:String(d.id)}))}):pe({items:[]}),[$]),D=a.useMemo(()=>pe(J?{items:J.map(d=>({label:d.name,value:String(d.id)}))}:{items:[]}),[J]),O=Se({mutationFn:async d=>{let m=d.image_id;if(n){h(!0);try{new FormData().append("file",n),m=(await Be.uploadImage({formData:{file:n}})).id}catch(w){throw h(!1),w}h(!1)}return K.createProduct({requestBody:{...d,image_id:m}})},onSuccess:()=>{V("Product created successfully."),X(),i(null),l(null),y(""),R(""),r(!1)},onError:d=>{G(d)},onSettled:()=>{k.invalidateQueries({queryKey:["products"]})}}),S=d=>{const m=d.target.files?.[0];if(m){if(!m.type.startsWith("image/")){G({});return}if(m.size>5*1024*1024){G({});return}i(m);const w=new FileReader;w.onloadend=()=>{l(w.result)},w.readAsDataURL(m)}},o=()=>{i(null),l(null),c.current&&(c.current.value="")},g=d=>{O.mutate(d)};return e.jsxs(Ue,{size:"xl",placement:"center",open:t,onOpenChange:({open:d})=>r(d),children:[e.jsx(Ke,{asChild:!0,children:e.jsxs(B,{value:"add-product",my:4,colorScheme:"teal",size:"md",children:[e.jsx(Wt,{})," Add Product"]})}),e.jsxs(Qe,{maxWidth:"800px",children:[e.jsxs("form",{onSubmit:L(g),children:[e.jsxs(Ye,{pb:4,children:[e.jsx(Je,{fontSize:"xl",fontWeight:"bold",children:"Add New Product"}),e.jsx(j,{fontSize:"sm",color:"gray.600",mt:1,children:"Fill in the details to add a new product to your inventory."})]}),e.jsx(Xe,{children:e.jsxs(Ar,{columns:2,gap:6,children:[e.jsxs(U,{gap:4,align:"stretch",children:[e.jsx(v,{required:!0,invalid:!!P.name,errorText:P.name?.message,label:"Product Name",children:e.jsx(z,{...b("name",{required:"Product name is required."}),placeholder:"Enter product name",size:"md",borderRadius:"md"})}),e.jsx(v,{invalid:!!P.description,errorText:P.description?.message,label:"Description",children:e.jsx(Lr,{...b("description"),placeholder:"Enter product description (optional)",size:"md",borderRadius:"md",rows:3})}),e.jsx(v,{required:!0,invalid:!!P.category_id,errorText:P.category_id?.message,label:"Category",children:e.jsxs(Ie,{collection:W,size:"md",onValueChange:d=>{const m=d.value[0];m&&m!=="loading"&&m!=="none"&&Q("category_id",m,{shouldValidate:!0})},children:[e.jsx(Re,{borderRadius:"md",children:e.jsx(Fe,{placeholder:"Select a category"})}),e.jsx(ze,{children:M?e.jsx(ie,{item:{label:"Loading categories...",value:"loading"},children:"Loading categories..."}):W.items.length>0?W.items.map(d=>e.jsx(ie,{item:d,children:d.label},d.value)):e.jsx(ie,{item:{label:"No categories available",value:"none"},children:"No categories available"})})]})}),e.jsx(v,{required:!0,invalid:!!P.status_id,errorText:P.status_id?.message,label:"Status",children:e.jsxs(Ie,{collection:D,size:"md",onValueChange:d=>{const m=d.value[0];m&&m!=="loading"&&m!=="none"&&Q("status_id",m,{shouldValidate:!0})},children:[e.jsx(Re,{borderRadius:"md",children:e.jsx(Fe,{placeholder:"Select a status"})}),e.jsx(ze,{children:oe?e.jsx(ie,{item:{label:"Loading statuses...",value:"loading"},children:"Loading statuses..."}):D.items.length>0?D.items.map(d=>e.jsx(ie,{item:d,children:d.label},d.value)):e.jsx(ie,{item:{label:"No statuses available",value:"none"},children:"No statuses available"})})]})})]}),e.jsxs(U,{gap:4,align:"stretch",children:[e.jsxs(A,{gap:4,children:[e.jsx(v,{required:!0,invalid:!!P.buying_price,errorText:P.buying_price?.message,label:"Buying Price (BP)",flex:1,children:e.jsx(z,{value:p,onChange:d=>{const m=se(d.target.value);y(m);const w=q(m);Q("buying_price",w,{shouldValidate:!0})},placeholder:"0",type:"text",size:"md",borderRadius:"md"})}),e.jsx(v,{required:!0,invalid:!!P.selling_price,errorText:P.selling_price?.message,label:"Selling Price (SP)",flex:1,children:e.jsx(z,{value:x,onChange:d=>{const m=se(d.target.value);R(m);const w=q(m);Q("selling_price",w,{shouldValidate:!0})},placeholder:"0",type:"text",size:"md",borderRadius:"md"})})]}),e.jsxs(A,{gap:4,children:[e.jsx(v,{required:!0,invalid:!!P.current_stock,errorText:P.current_stock?.message,label:"Current Stock",flex:1,children:e.jsx(z,{...b("current_stock",{required:"Current stock is required.",valueAsNumber:!0,min:{value:1,message:"Stock must be at least 1"}}),placeholder:"1",type:"number",size:"md",borderRadius:"md"})}),e.jsx(v,{invalid:!!P.reorder_level,errorText:P.reorder_level?.message,label:e.jsxs(A,{gap:1,children:[e.jsx(j,{children:"Reorder Level"}),e.jsx(Gr,{content:"The minimum stock quantity at which you should reorder this product to avoid running out of stock.",positioning:{placement:"top"},children:e.jsx(Gt,{color:{base:"blue.400",_light:"blue.600"},cursor:"help",children:e.jsx(Ht,{})})})]}),flex:1,children:e.jsx(z,{...b("reorder_level",{valueAsNumber:!0,min:{value:0,message:"Reorder level cannot be negative"}}),placeholder:"0",type:"number",size:"md",borderRadius:"md"})})]}),e.jsxs(v,{label:"Product Image",helperText:"Upload an image for this product (optional, max 5MB)",children:[e.jsx("input",{ref:c,type:"file",accept:"image/*",onChange:S,style:{display:"none"}}),s?e.jsxs(T,{position:"relative",children:[e.jsx(me,{src:s,alt:"Product preview",borderRadius:"md",maxH:"200px",objectFit:"cover",w:"full"}),e.jsx(Ve,{position:"absolute",top:2,right:2,size:"sm",colorScheme:"red",onClick:o,"aria-label":"Remove image",children:e.jsx($e,{})})]}):e.jsx(T,{border:"2px dashed",borderColor:{base:"gray.600",_light:"gray.300"},borderRadius:"md",p:6,textAlign:"center",cursor:"pointer",_hover:{borderColor:"teal.400"},onClick:()=>c.current?.click(),children:e.jsxs(re,{direction:"column",align:"center",gap:2,children:[e.jsx(Me,{size:24}),e.jsx(j,{fontSize:"sm",children:"Click to upload image"}),e.jsx(j,{fontSize:"xs",color:{base:"gray.400",_light:"gray.500"},children:"PNG, JPG up to 5MB"})]})})]})]})]})}),e.jsxs(Ze,{mt:6,gap:3,children:[e.jsx(et,{asChild:!0,children:e.jsx(B,{variant:"outline",colorScheme:"gray",disabled:Z||u,size:"md",children:"Cancel"})}),e.jsx(B,{colorScheme:"teal",type:"submit",disabled:!ne||u,loading:Z||u,size:"md",children:u?"Uploading...":"Create Product"})]})]}),e.jsx(tt,{})]})]})},Ur=({product:t,children:r,isOpen:n,onOpenChange:i,"data-testid":s})=>{const[l,u]=a.useState(!1),h=ye(),{showSuccessToast:p}=ve(),y=n!==void 0?n:l,x=i||u,R=Se({mutationFn:k=>K.deleteProduct({id:k}),onSuccess:()=>{p("Product deleted successfully."),x(!1)},onError:k=>{G(k)},onSettled:()=>{h.invalidateQueries({queryKey:["products"]})}}),c=async()=>{R.mutate(t.id)};return e.jsxs(Ue,{size:{base:"xs",md:"md"},placement:"center",open:y,onOpenChange:({open:k})=>x(k),"data-testid":s,children:[r&&n===void 0&&e.jsx(Ke,{asChild:!0,children:r}),e.jsxs(Qe,{children:[e.jsx(Ye,{children:e.jsx(Je,{children:"Delete Product"})}),e.jsxs(Xe,{children:[e.jsxs(j,{children:["Are you sure you want to delete ",e.jsx("strong",{children:t.name}),"? This action cannot be undone."]}),t.current_stock!=null&&t.current_stock>0&&e.jsxs(j,{color:"orange.500",mt:2,children:["Warning: This product has ",t.current_stock," units in stock."]})]}),e.jsxs(Ze,{gap:2,children:[e.jsx(et,{asChild:!0,children:e.jsx(B,{variant:"subtle",colorPalette:"gray",disabled:R.isPending,children:"Cancel"})}),e.jsx(B,{colorPalette:"red",onClick:c,loading:R.isPending,children:"Delete"})]}),e.jsx(tt,{})]})]})},Kr=({product:t,children:r,isOpen:n,onOpenChange:i,"data-testid":s})=>{const[l,u]=a.useState(!1),[h,p]=a.useState(null),[y,x]=a.useState(null),[R,c]=a.useState(!1),k=a.useRef(null),V=ye(),{showSuccessToast:se}=ve(),q=n!==void 0?n:l,$=i||u,{register:M,handleSubmit:J,reset:oe,formState:{errors:b,isValid:L,isSubmitting:X,isDirty:Q}}=Le({mode:"onBlur",criteriaMode:"all",defaultValues:t}),P=Se({mutationFn:async S=>{let o=S.image_id;if(h){c(!0);try{o=(await Be.uploadImage({formData:{file:h}})).id}catch(g){throw c(!1),g}c(!1)}return K.updateProduct({id:t.id,requestBody:{...S,image_id:o}})},onSuccess:()=>{se("Product updated successfully! ✅"),p(null),x(null),$(!1)},onError:S=>{G(S)},onSettled:()=>{V.invalidateQueries({queryKey:["products"]})}}),ne=S=>{const o=S.target.files?.[0];if(o){if(!o.type.startsWith("image/")){G({});return}if(o.size>5*1024*1024){G({});return}p(o);const g=new FileReader;g.onloadend=()=>{x(g.result)},g.readAsDataURL(o)}},Z=()=>{p(null),x(null),k.current&&(k.current.value="")},W=S=>{P.mutate(S)},D=()=>{oe(),p(null),x(null),$(!1)},O=()=>{oe(t),p(null),x(null),$(!0)};return e.jsxs(e.Fragment,{children:[r&&n===void 0&&e.jsx("div",{onClick:O,style:{cursor:"pointer",display:"inline-block"},children:r}),e.jsxs(Ut,{open:q,onOpenChange:S=>!S.open&&D(),size:"md",placement:"end","data-testid":s,children:[e.jsx(Kt,{}),e.jsxs(Qt,{children:[e.jsxs(Yt,{borderBottomWidth:"1px",children:[e.jsxs(Jt,{children:["Edit Product - ",t.name]}),e.jsx(Xt,{})]}),e.jsx(Zt,{children:e.jsxs(U,{gap:6,align:"stretch",children:[e.jsxs(T,{children:[e.jsx(j,{fontSize:"md",fontWeight:"semibold",mb:3,children:"Current Product Information"}),e.jsxs(U,{align:"stretch",gap:2,p:4,borderWidth:"1px",borderRadius:"md",bg:"gray.900",children:[e.jsxs(A,{justify:"space-between",children:[e.jsx(j,{fontSize:"sm",color:"gray.400",children:"Product ID"}),e.jsx(j,{fontSize:"xs",color:"gray.500",fontFamily:"mono",children:t.id})]}),e.jsxs(A,{justify:"space-between",children:[e.jsx(j,{fontSize:"sm",color:"gray.400",children:"Category"}),e.jsx(E,{colorScheme:"blue",size:"sm",children:t.category?.name||"No category"})]}),e.jsxs(A,{justify:"space-between",children:[e.jsx(j,{fontSize:"sm",color:"gray.400",children:"Status"}),e.jsx(E,{colorScheme:"purple",size:"sm",children:t.status?.name||"No status"})]}),e.jsxs(A,{justify:"space-between",children:[e.jsx(j,{fontSize:"sm",color:"gray.400",children:"Current Stock"}),e.jsxs(E,{colorScheme:t.current_stock===0?"red":t.current_stock&&t.reorder_level&&t.current_stock<=t.reorder_level?"orange":"green",size:"sm",children:[t.current_stock||0," units"]})]})]})]}),e.jsx(mr,{}),e.jsxs(T,{children:[e.jsx(j,{fontSize:"md",fontWeight:"semibold",mb:3,children:"Update Product Details"}),e.jsx("form",{onSubmit:J(W),id:"edit-product-form","data-testid":"edit-product-form",children:e.jsxs(U,{gap:4,align:"stretch",children:[e.jsx(v,{invalid:!!b.name,errorText:b.name?.message,label:"Product Name",children:e.jsx(z,{...M("name",{required:"Product name is required"}),placeholder:"Enter product name",type:"text"})}),e.jsx(v,{invalid:!!b.description,errorText:b.description?.message,label:"Description",children:e.jsx(z,{...M("description"),placeholder:"Product description (optional)",type:"text"})}),e.jsx(v,{invalid:!!b.buying_price,errorText:b.buying_price?.message,label:"Buying Price (KES)",helperText:"Cost price for procurement",children:e.jsx(z,{...M("buying_price",{valueAsNumber:!0,required:"Buying price is required",min:{value:.01,message:"Buying price must be greater than 0"}}),placeholder:"0.00",type:"number",step:"0.01"})}),e.jsx(v,{invalid:!!b.selling_price,errorText:b.selling_price?.message,label:"Selling Price (KES)",helperText:"Must be greater than buying price",children:e.jsx(z,{...M("selling_price",{valueAsNumber:!0,required:"Selling price is required",validate:(S,o)=>{const g=typeof S=="number"?S:parseFloat(String(S));if(!g||g<=0)return"Selling price must be greater than 0";const d=typeof o.buying_price=="number"?o.buying_price:parseFloat(String(o.buying_price||0));return g<=d?"Selling price must be greater than buying price":!0}}),placeholder:"0.00",type:"number",step:"0.01"})}),e.jsx(v,{invalid:!!b.current_stock,errorText:b.current_stock?.message,label:"Current Stock",helperText:"Available units in inventory (minimum 1)",children:e.jsx(z,{...M("current_stock",{valueAsNumber:!0,min:{value:1,message:"Stock must be at least 1"}}),placeholder:"1",type:"number"})}),e.jsx(v,{invalid:!!b.reorder_level,errorText:b.reorder_level?.message,label:"Reorder Level",helperText:"Minimum stock before reordering",children:e.jsx(z,{...M("reorder_level",{valueAsNumber:!0,min:{value:0,message:"Reorder level cannot be negative"}}),placeholder:"0",type:"number"})}),e.jsxs(v,{label:"Product Image",helperText:"Upload a new image to replace the current one (optional, max 5MB)",children:[e.jsx("input",{ref:k,type:"file",accept:"image/*",onChange:ne,style:{display:"none"}}),y?e.jsxs(T,{position:"relative",children:[e.jsx(me,{src:y,alt:"Product preview",borderRadius:"md",maxH:"200px",objectFit:"cover",w:"full"}),e.jsx(Ve,{position:"absolute",top:2,right:2,size:"sm",colorScheme:"red",onClick:Z,"aria-label":"Remove image",children:e.jsx($e,{})})]}):t.image?.id?e.jsxs(T,{children:[e.jsx(j,{fontSize:"sm",mb:2,color:"gray.400",children:"Current Image:"}),e.jsx(me,{src:`/api/v1/media/serve/${t.image.id}`,alt:t.name,borderRadius:"md",maxH:"200px",objectFit:"cover",w:"full",mb:2}),e.jsx(B,{size:"sm",variant:"outline",onClick:()=>k.current?.click(),children:"Replace Image"})]}):e.jsx(T,{border:"2px dashed",borderColor:{base:"gray.600",_light:"gray.300"},borderRadius:"md",p:6,textAlign:"center",cursor:"pointer",_hover:{borderColor:"teal.400"},onClick:()=>k.current?.click(),children:e.jsxs(re,{direction:"column",align:"center",gap:2,children:[e.jsx(Me,{size:24}),e.jsx(j,{fontSize:"sm",children:"Click to upload image"}),e.jsx(j,{fontSize:"xs",color:{base:"gray.400",_light:"gray.500"},children:"PNG, JPG up to 5MB"})]})})]})]})})]})]})}),e.jsxs(er,{borderTopWidth:"1px",gap:3,children:[e.jsx(B,{variant:"outline",colorScheme:"gray",disabled:X||R,onClick:D,flex:"1",children:"Cancel"}),e.jsx(B,{colorScheme:"teal",type:"submit",form:"edit-product-form",disabled:!Q||!L||R,loading:X||R,flex:"1",children:R?"Uploading...":"Update Product"})]})]})]})]})},Qr=({product:t})=>{const[r,n]=a.useState(!1),[i,s]=a.useState(!1),[l,u]=a.useState(!1),h=()=>{u(!1),setTimeout(()=>n(!0),100)},p=()=>{u(!1),setTimeout(()=>s(!0),100)};return e.jsxs(e.Fragment,{children:[e.jsxs(We,{open:l,onOpenChange:y=>u(y.open),"data-testid":"product-actions-menu",children:[e.jsx(Ge,{asChild:!0,children:e.jsx(lr,{fontSize:18,cursor:"pointer","data-testid":"product-actions-trigger"})}),e.jsxs(He,{children:[e.jsxs(H,{value:"edit",onClick:h,"data-testid":"edit-product-menu-item",children:[e.jsx(tr,{fontSize:16}),"Edit Product"]}),e.jsxs(H,{value:"delete",color:"red.500",onClick:p,"data-testid":"delete-product-menu-item",children:[e.jsx(rr,{fontSize:16}),"Delete Product"]})]})]}),e.jsx(Kr,{product:t,isOpen:r,onOpenChange:n,"data-testid":"edit-product-drawer"}),e.jsx(Ur,{product:t,isOpen:i,onOpenChange:s,"data-testid":"delete-product-dialog"})]})},Yr=()=>e.jsxs(rt,{size:{base:"sm",md:"md"},children:[e.jsx(st,{children:e.jsxs(ge,{children:[e.jsx(I,{children:"Product"}),e.jsx(I,{children:"Category"}),e.jsx(I,{children:"Tag"}),e.jsx(I,{children:"Buying Price"}),e.jsx(I,{children:"Selling Price"}),e.jsx(I,{children:"Current Stock"}),e.jsx(I,{children:"Reorder Level"}),e.jsx(I,{children:"Status"}),e.jsx(I,{children:"Actions"})]})}),e.jsx(ot,{children:[...Array(5)].map((t,r)=>e.jsxs(ge,{children:[e.jsx(_,{children:e.jsx(te,{noOfLines:1})}),e.jsx(_,{children:e.jsx(te,{noOfLines:1})}),e.jsx(_,{children:e.jsx(te,{noOfLines:1})}),e.jsx(_,{children:e.jsx(te,{noOfLines:1})}),e.jsx(_,{children:e.jsx(te,{noOfLines:1})}),e.jsx(_,{children:e.jsx(te,{noOfLines:1})}),e.jsx(_,{children:e.jsx(te,{noOfLines:1})})]},r))})]}),Jr=25;function ae({value:t,onChange:r,children:n,...i}){return e.jsx("select",{value:t,onChange:s=>r(s.target.value),style:{width:"100%",padding:"8px",borderRadius:"6px",borderWidth:"1px",borderStyle:"solid",backgroundColor:"var(--chakra-colors-input-bg)",borderColor:"var(--chakra-colors-input-border)",color:"var(--chakra-colors-text-primary)",fontSize:"14px",cursor:"pointer",...i.style},onFocus:s=>{s.currentTarget.style.borderColor="var(--chakra-colors-teal-500)",s.currentTarget.style.boxShadow="0 0 0 1px var(--chakra-colors-teal-500)"},onBlur:s=>{s.currentTarget.style.borderColor="var(--chakra-colors-input-border)",s.currentTarget.style.boxShadow="none"},...i,children:n})}function Xr(t){const r=t.toLowerCase();return r.includes("active")?"green":r.includes("inactive")||r.includes("discontinued")||r.includes("out of stock")?"red":r.includes("coming soon")?"blue":"gray"}function Zr(t,r){return t===0?"red":r&&t<=r?"orange":"green"}function es({product:t,statuses:r,onStatusChange:n}){const[i,s]=a.useState(!1),[l,u]=a.useState(!1),h=r.find(c=>c.id===t.status_id),p=Xr(h?.name||""),y=async c=>{if(c!==t.status_id){u(!0);try{await n(t.id,c),setTimeout(()=>{u(!1),s(!1)},500)}catch(k){console.error("Failed to update status:",k),u(!1),s(!1)}}else s(!1)},x=c=>{c.key==="Escape"&&s(!1)},R=()=>{setTimeout(()=>s(!1),150)};return i?e.jsx("select",{value:t.status_id,onChange:c=>y(c.target.value),onKeyDown:x,onBlur:R,autoFocus:!0,disabled:l,style:{fontSize:"14px",minWidth:"130px",opacity:l?.7:1,cursor:l?"wait":"pointer",backgroundColor:"var(--chakra-colors-input-bg)",borderColor:"var(--chakra-colors-input-border)",padding:"6px",borderRadius:"6px",borderWidth:"1px",borderStyle:"solid",color:"var(--chakra-colors-text-primary)"},children:r.map(c=>e.jsx("option",{value:c.id,children:c.name},c.id))}):e.jsxs(E,{colorScheme:l?"blue":p,cursor:"pointer",onClick:()=>s(!0),_hover:{opacity:.8,transform:"scale(1.02)",boxShadow:"md"},transition:"all 0.2s ease",size:"sm",px:3,py:1,borderRadius:"md",title:"Click to change status",position:"relative",overflow:"hidden",children:[l&&e.jsx(j,{as:"span",position:"absolute",top:"0",left:"0",right:"0",bottom:"0",display:"flex",alignItems:"center",justifyContent:"center",bg:{base:"rgba(0,0,0,0.2)",_light:"rgba(255,255,255,0.8)"},fontSize:"xs",color:{base:"white",_light:"gray.800"},children:"⏳"}),h?.name||"Unknown"]})}function ts({page:t,pageSize:r,search:n,category:i,status:s}){const l={skip:(t-1)*r,limit:r};return n.trim()&&(l.name=n.trim()),i&&(l.categoryId=i),s&&(l.statusId=s),{queryKey:["products",{page:t,pageSize:r,search:n,category:i,status:s}],queryFn:()=>K.readProducts(l)}}function rs(){const t=or({from:"/products"}),{page:r,search:n,category:i,status:s,pageSize:l}=nr.useSearch(),u=ye(),{showSuccessToast:h}=ve(),[p,y]=a.useState(n),[x,R]=a.useState(n);a.useEffect(()=>{const o=setTimeout(()=>{R(p)},300);return()=>clearTimeout(o)},[p]),a.useEffect(()=>{x!==n&&t({to:"/products",search:o=>({...o,search:x,page:1})})},[x,n,t]),a.useEffect(()=>{t({to:"/products",search:o=>({...o,page:1})})},[i,s]);const[c,k]=a.useState({image:!1,name:!0,description:!1,category:!0,buyingPrice:!1,sellingPrice:!1,currentStock:!1,reorderLevel:!0,status:!0,actions:!0}),{data:V}=le({queryKey:["categories"],queryFn:()=>K.readCategories()}),{data:se}=le({queryKey:["statuses"],queryFn:()=>K.readStatuses()}),q=se||[],{data:$,isLoading:M,isPlaceholderData:J}=le({...ts({page:r,pageSize:l,search:x,category:i,status:s}),placeholderData:o=>o}),oe=Se({mutationFn:({productId:o,statusId:g})=>K.updateProduct({id:o,requestBody:{status_id:g}}),onSuccess:()=>{h("Status updated successfully! ✅"),u.invalidateQueries({queryKey:["products"]})},onError:o=>{console.error("Update status error:",o),o?.status===403||o?.body?.detail?.includes("permission")?G(o):o?.status===404?G(o):G(o)}}),b=async(o,g)=>oe.mutateAsync({productId:o,statusId:g}),L=o=>{k(g=>({...g,[o]:!g[o]}))},X=o=>{t({to:"/products",search:g=>({...g,page:o})})},Q=o=>{t({to:"/products",search:g=>({...g,pageSize:o,page:1})})},P=o=>{t({to:"/products",search:g=>({...g,category:o,page:1})})},ne=o=>{t({to:"/products",search:g=>({...g,status:o,page:1})})},Z=()=>{y(""),t({to:"/products",search:()=>({page:1,search:"",category:"",status:"",pageSize:l||Jr})})},W=$?.data||[],D=$?.count||0,O=Math.ceil(D/l),S=p||i||s;return M?e.jsx(Yr,{}):W.length===0?e.jsxs(U,{gap:6,align:"stretch",children:[e.jsx(T,{p:4,borderWidth:"1px",borderRadius:"lg",children:e.jsxs(U,{gap:4,align:"stretch",children:[e.jsxs(Ce,{direction:{base:"column",md:"row"},gap:4,children:[e.jsx(T,{flex:1,children:e.jsx(v,{label:"Search Products",children:e.jsxs(T,{position:"relative",children:[e.jsx(z,{placeholder:"Search by product name only...",value:p,onChange:o=>y(o.target.value),size:"md",pr:p&&p!==x?"10":"4"}),p&&p!==x&&e.jsx(T,{position:"absolute",right:"2",top:"50%",transform:"translateY(-50%)",children:e.jsx(j,{fontSize:"xs",color:{base:"gray.500",_light:"gray.600"},children:"⏳"})})]})})}),e.jsx(T,{minW:{base:"full",md:"200px"},children:e.jsx(v,{label:"Category",children:e.jsxs(ae,{value:i,onChange:P,children:[e.jsx("option",{value:"",children:"All Categories"}),V?.data.map(o=>e.jsx("option",{value:o.id,children:o.name},o.id))]})})}),e.jsx(T,{minW:{base:"full",md:"200px"},children:e.jsx(v,{label:"Status",children:e.jsxs(ae,{value:s,onChange:ne,children:[e.jsx("option",{value:"",children:"All Statuses"}),q?.map(o=>e.jsx("option",{value:o.id,children:o.name},o.id))]})})})]}),e.jsxs(re,{justify:"space-between",align:"center",children:[e.jsxs(A,{gap:2,children:[e.jsxs(j,{fontSize:"sm",color:{base:"gray.500",_light:"gray.600"},children:["Showing ",W.length," of ",D," products",O>1&&` (Page ${r} of ${O})`]}),S&&e.jsxs(A,{gap:1,children:[x&&e.jsxs(E,{colorScheme:"teal",size:"sm",children:['Name: "',x,'"']}),i&&V?.data&&e.jsx(E,{colorScheme:"blue",size:"sm",children:V.data.find(o=>o.id===i)?.name}),s&&q&&e.jsx(E,{colorScheme:"purple",size:"sm",children:q.find(o=>o.id===s)?.name})]})]}),S&&e.jsxs(B,{size:"sm",variant:"ghost",onClick:Z,children:[e.jsx(_e,{})," Clear Filters"]})]})]})}),e.jsx(Ir,{children:e.jsxs(Rr,{children:[e.jsx(zr,{children:e.jsx(ir,{})}),e.jsxs(U,{textAlign:"center",children:[e.jsx(Fr,{children:S?"No products match your filters":"You don't have any products yet"}),e.jsx(Dr,{children:S?"Try adjusting your search or filters":"Start by adding your first product to the inventory."})]})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{p:4,borderWidth:"1px",borderRadius:"lg",mb:4,children:e.jsxs(U,{gap:4,align:"stretch",children:[e.jsxs(Ce,{direction:{base:"column",md:"row"},gap:4,children:[e.jsx(T,{flex:1,children:e.jsx(v,{label:"Search Products",children:e.jsxs(T,{position:"relative",children:[e.jsx(z,{placeholder:"Search by product name only...",value:p,onChange:o=>y(o.target.value),size:"md",pr:p&&p!==x?"10":"4"}),p&&p!==x&&e.jsx(T,{position:"absolute",right:"2",top:"50%",transform:"translateY(-50%)",children:e.jsx(j,{fontSize:"xs",color:{base:"gray.500",_light:"gray.600"},children:"⏳"})})]})})}),e.jsx(T,{minW:{base:"full",md:"200px"},children:e.jsx(v,{label:"Category",children:e.jsxs(ae,{value:i,onChange:P,children:[e.jsx("option",{value:"",children:"All Categories"}),V?.data.map(o=>e.jsx("option",{value:o.id,children:o.name},o.id))]})})}),e.jsx(T,{minW:{base:"full",md:"200px"},children:e.jsx(v,{label:"Status",children:e.jsxs(ae,{value:s,onChange:ne,children:[e.jsx("option",{value:"",children:"All Statuses"}),q?.map(o=>e.jsx("option",{value:o.id,children:o.name},o.id))]})})})]}),e.jsxs(re,{justify:"space-between",align:"center",children:[e.jsxs(A,{gap:2,children:[e.jsxs(j,{fontSize:"sm",color:{base:"gray.500",_light:"gray.600"},children:["Showing ",W.length," of ",D," products",O>1&&` (Page ${r} of ${O})`]}),S&&e.jsxs(A,{gap:1,children:[x&&e.jsxs(E,{colorScheme:"teal",size:"sm",children:['Name: "',x,'"']}),i&&V?.data&&e.jsx(E,{colorScheme:"blue",size:"sm",children:V.data.find(o=>o.id===i)?.name}),s&&q&&e.jsx(E,{colorScheme:"purple",size:"sm",children:q.find(o=>o.id===s)?.name})]})]}),S&&e.jsxs(B,{size:"sm",variant:"ghost",onClick:Z,children:[e.jsx(_e,{})," Clear Filters"]})]})]})}),e.jsx(re,{justify:"flex-end",mb:4,children:e.jsxs(We,{children:[e.jsx(Ge,{asChild:!0,children:e.jsxs(B,{variant:"outline",size:"sm",children:[e.jsx(Y,{})," Columns"]})}),e.jsxs(He,{children:[e.jsxs(H,{value:"name",onClick:()=>L("name"),children:[c.name?e.jsx(Y,{}):e.jsx(ee,{}),"Product"]}),e.jsxs(H,{value:"category",onClick:()=>L("category"),children:[c.category?e.jsx(Y,{}):e.jsx(ee,{}),"Category"]}),e.jsxs(H,{value:"buyingPrice",onClick:()=>L("buyingPrice"),children:[c.buyingPrice?e.jsx(Y,{}):e.jsx(ee,{}),"Buying Price"]}),e.jsxs(H,{value:"sellingPrice",onClick:()=>L("sellingPrice"),children:[c.sellingPrice?e.jsx(Y,{}):e.jsx(ee,{}),"Selling Price"]}),e.jsxs(H,{value:"currentStock",onClick:()=>L("currentStock"),children:[c.currentStock?e.jsx(Y,{}):e.jsx(ee,{}),"Current Stock"]}),e.jsxs(H,{value:"reorderLevel",onClick:()=>L("reorderLevel"),children:[c.reorderLevel?e.jsx(Y,{}):e.jsx(ee,{}),"Reorder Level"]}),e.jsxs(H,{value:"status",onClick:()=>L("status"),children:[c.status?e.jsx(Y,{}):e.jsx(ee,{}),"Status"]})]})]})}),e.jsxs(rt,{size:{base:"sm",md:"md"},variant:"outline",children:[e.jsx(st,{children:e.jsxs(ge,{children:[c.name&&e.jsx(I,{children:"Product"}),c.category&&e.jsx(I,{children:"Category"}),c.buyingPrice&&e.jsx(I,{children:"Buying Price"}),c.sellingPrice&&e.jsx(I,{children:"Selling Price"}),c.currentStock&&e.jsx(I,{children:"Current Stock"}),c.reorderLevel&&e.jsx(I,{children:"Reorder Level"}),c.status&&e.jsx(I,{children:"Status"}),c.actions&&e.jsx(I,{children:"Actions"})]})}),e.jsx(ot,{children:W.map(o=>e.jsxs(ge,{opacity:J?.5:1,children:[c.image&&e.jsx(_,{children:o.image?.file_name?e.jsx(me,{src:`/uploads/products/${o.image.file_name}`,alt:o.name,boxSize:"40px",objectFit:"cover",borderRadius:"md"}):e.jsx(j,{fontSize:"xs",color:{base:"gray.500",_light:"gray.400"},children:"No image"})}),c.name&&e.jsx(_,{fontWeight:"medium",children:o.name}),c.description&&e.jsx(_,{children:o.description||"-"}),c.category&&e.jsx(_,{children:e.jsx(E,{colorScheme:"purple",size:"sm",children:o.category?.name||"-"})}),c.buyingPrice&&e.jsxs(_,{children:["KES ",parseFloat(o.buying_price).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),c.sellingPrice&&e.jsxs(_,{fontWeight:"semibold",children:["KES ",parseFloat(o.selling_price).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),c.currentStock&&e.jsx(_,{children:e.jsxs(E,{colorScheme:Zr(o.current_stock??0,o.reorder_level??void 0),size:"sm",children:[o.current_stock??0," units"]})}),c.reorderLevel&&e.jsx(_,{children:o.reorder_level||"-"}),c.status&&e.jsx(_,{children:e.jsx(es,{product:o,statuses:q,onStatusChange:b})}),c.actions&&e.jsx(_,{children:e.jsx(Qr,{product:o})})]},o.id))})]}),e.jsx(T,{p:4,borderWidth:"1px",borderRadius:"lg",mt:4,children:e.jsxs(Ce,{direction:{base:"column",md:"row"},justify:"space-between",align:"center",gap:4,children:[e.jsxs(A,{gap:2,children:[e.jsx(j,{fontSize:"sm",color:{base:"gray.500",_light:"gray.600"},children:"Items per page:"}),e.jsxs(ae,{value:l,onChange:o=>Q(Number(o)),style:{maxWidth:"80px",fontSize:"14px",padding:"4px"},children:[e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"25",children:"25"}),e.jsx("option",{value:"50",children:"50"}),e.jsx("option",{value:"100",children:"100"})]}),e.jsxs(j,{fontSize:"sm",color:{base:"gray.500",_light:"gray.600"},children:["(",(r-1)*l+1,"-",Math.min(r*l,D)," of ",D,")"]})]}),O>1&&e.jsxs(cr,{count:D,pageSize:l,page:r,onPageChange:o=>X(o.page),children:[e.jsx(dr,{}),e.jsx(ur,{}),e.jsx(pr,{})]}),O>10&&e.jsxs(A,{gap:2,children:[e.jsx(j,{fontSize:"sm",color:"gray.500",children:"Go to page:"}),e.jsx(z,{type:"number",min:"1",max:O,value:r,onChange:o=>{const g=Number(o.target.value);g>=1&&g<=O&&X(g)},w:"20",size:"sm"})]})]})})]})}function ps(){return e.jsx(sr,{maxW:"full",minH:"100vh",children:e.jsxs(re,{direction:"column",gap:6,pt:12,pb:8,children:[e.jsxs(re,{justify:"space-between",align:"center",children:[e.jsx(gr,{size:"lg",children:"Products Management"}),e.jsx(Hr,{})]}),e.jsx(rs,{})]})})}export{ps as component};
